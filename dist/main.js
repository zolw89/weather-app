(()=>{const e=document.querySelector("#city"),t=document.querySelector("input"),n=document.querySelector("button"),r=document.querySelector("#description"),a=document.querySelector("#temp"),o=document.querySelector("#wind"),c=document.querySelector("#icon"),d=document.querySelector("#time"),u=document.querySelector("#sunrise"),m=document.querySelector("#sunset"),i=document.querySelector("#day-length"),l=document.querySelector("#humidity"),s=document.querySelector("#pressure"),g=document.querySelector("#feel"),p=document.querySelector("#change-unit"),y=document.querySelector("#cloud"),b=document.querySelector("#temp-max"),h=document.querySelector("#temp-min"),k=document.querySelector(".forecast-weather"),w=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],f=e=>{const t=new Date(1e3*(e-7200)).getDay();return console.log(t),w[t].slice(0,3)},M=(e,t)=>new Date(1e3*(e-7200+t)).toLocaleString(S.time,{hour:"2-digit",minute:"2-digit"});let L=!0,S={};const q=()=>{S=!0===L?{url:"&units=metric",temp:"°C",speed:"m/s",time:"en-GB"}:{url:"&units=imperial",temp:"°F",speed:"mph",time:"en-US"}};let T,j;q();let H="https://api.openweathermap.org/data/2.5/weather?q=london&appid=23eeb4ff69ee56c19923f99c28274d0f"+S.url,I="https://api.openweathermap.org/data/2.5/forecast?q=london&appid=23eeb4ff69ee56c19923f99c28274d0f"+S.url;const v=async()=>{try{const e=await fetch(H,{mode:"cors"}),t=await e.json();T=t,E(),D();const n=await fetch(I,{mode:"cors"}),r=await n.json();j=r,$()}catch(e){alert("Enter valid city name please!")}};p.addEventListener("click",(()=>{console.log(),L=!0!==L,q(),H="https://api.openweathermap.org/data/2.5/weather?q="+T.name+"&appid=23eeb4ff69ee56c19923f99c28274d0f"+S.url,console.log(H),v()})),n.addEventListener("click",(()=>{if(console.log(t.value),""===t.value)return alert("Enter valid city name please!");H="https://api.openweathermap.org/data/2.5/weather?q="+t.value+"&appid=23eeb4ff69ee56c19923f99c28274d0f"+S.url,v()})),window.addEventListener("keydown",(e=>{if("Enter"===e.key){if(""===t.value)return alert("Enter valid city name please!");H="https://api.openweathermap.org/data/2.5/weather?q="+t.value+"&appid=23eeb4ff69ee56c19923f99c28274d0f"+S.url,v()}}));const E=()=>{var t,n;console.log(T),e.innerHTML=T.name,r.innerHTML=T.weather[0].description,a.innerHTML=Math.round(Number(T.main.temp))+" "+S.temp,o.innerHTML=T.wind.speed+" "+S.speed,c.src=`https://openweathermap.org/img/w/${T.weather[0].icon}.png`,d.innerHTML=(()=>{const e=new Date((new Date).getTime()+1e3*T.timezone-72e5),t=e.getDay();console.log(t);const n=e.toLocaleDateString(),r=e.toLocaleTimeString(S.time,{hour:"2-digit",minute:"2-digit"});return console.log(n),`${w[t]}, ${n} ${r}`})(),u.innerHTML=M(T.sys.sunrise,T.timezone),m.innerHTML=M(T.sys.sunset,T.timezone),i.innerHTML=(t=T.sys.sunrise,n=T.sys.sunset,`${Math.floor((n-t)/3600)}h ${Math.round(60*((n-t)/3600-Math.floor((n-t)/3600)))}min`),l.innerHTML=`${T.main.humidity}%`,s.innerHTML=T.main.pressure+" hPa",g.innerHTML=Math.round(Number(T.main.feels_like))+" "+S.temp,y.innerHTML=`${T.clouds.all}%`,b.innerHTML=Math.round(Number(T.main.temp_max))+" "+S.temp,h.innerHTML=Math.round(Number(T.main.temp_min))+" "+S.temp},$=()=>{console.log(j),k.innerHTML="";for(let e=0;e<27;e+=2){const t=document.createElement("h2");t.innerHTML=f(j.list[e].dt);const n=document.createElement("div"),r=document.createElement("p");r.innerHTML=M(j.list[e].dt,0);const a=document.createElement("img");a.src=`https://openweathermap.org/img/w/${j.list[e].weather[0].icon}.png`;const o=document.createElement("p");o.innerHTML=Math.round(Number(j.list[e].main.temp))+" "+S.temp;const c=document.createElement("p");c.innerHTML=j.list[e].weather[0].main,n.append(t,r,a,o,c),k.appendChild(n)}},D=()=>{switch(T.weather[0].icon){case"01d":document.body.style.backgroundImage="url('./img/clear-day.jpg')";break;case"01n":document.body.style.backgroundImage="url('./img/clear-night.jpg')";break;case"02d":document.body.style.backgroundImage="url('./img/fewcloud-day.jpg')";break;case"02n":document.body.style.backgroundImage="url('./img/fewcloud-night.jpg')";break;case"03d":document.body.style.backgroundImage="url('./img/scatteredcloud-day.jpg')";break;case"03n":document.body.style.backgroundImage="url('./img/scatteredcloud-night.jpg')";break;case"04d":document.body.style.backgroundImage="url('./img/brokencloud-day.jpg')";break;case"04n":document.body.style.backgroundImage="url('./img/brokencloud-night.jpg')";break;case"09d":document.body.style.backgroundImage="url('./img/showerrain-day.jpg')";break;case"09n":document.body.style.backgroundImage="url('./img/showerrain-night.jpg')";break;case"10d":document.body.style.backgroundImage="url('./img/rain-day.jpg')";break;case"10n":document.body.style.backgroundImage="url('./img/rain-night.jpg')";break;case"11d":document.body.style.backgroundImage="url('./img/thunderstorm-day.jpg')";break;case"11n":document.body.style.backgroundImage="url('./img/thunderstorm-night.jpg')";break;case"13d":document.body.style.backgroundImage="url('./img/snow-day.jpg')";break;case"13n":document.body.style.backgroundImage="url('./img/snow-night.jpg')";break;case"50d":document.body.style.backgroundImage="url('./img/mist-day.jpg')";break;case"50n":document.body.style.backgroundImage="url('./img/mist-night.jpg')"}};v()})();